<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>JCV ClassPlus - Final SPA</title>
<style>
  :root{
    --primary:#0d47a1;
    --primary-dark:#083375;
    --muted:#6b7280;
    --card-radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background:#f3f5f8;
    color:#111827;
    -webkit-font-smoothing:antialiased;
  }

  /* TOP BAR */
  .topbar{
    position:fixed;
    top:0; left:0; right:0;
    height:60px;
    background:linear-gradient(180deg,var(--primary),var(--primary-dark));
    color:#fff;
    display:flex;
    align-items:center;
    gap:12px;
    padding:0 14px;
    z-index:1200;
  }
  .hamburger{
    width:44px;height:44px;border-radius:10px;
    display:flex;align-items:center;justify-content:center;
    background:rgba(255,255,255,0.07);
    cursor:pointer;font-size:20px;
  }
  .app-title{
    font-weight:700;font-size:18px;
    letter-spacing:0.2px;
  }
  .top-actions{margin-left:auto;display:flex;gap:10px;align-items:center}
  .top-actions button{background:transparent;border:none;color:rgba(255,255,255,0.95);cursor:pointer;font-size:18px}

  /* SIDE DRAWER */
  .sidedrawer{
    position:fixed; left:-300px; top:0; bottom:0; width:300px;
    background:#0b1220; color:#fff; padding-top:70px;
    transition:left .28s cubic-bezier(.2,.9,.3,1);
    z-index:1500;
  }
  .sidedrawer.open{left:0}
  .sidedrawer .user{
    padding:18px;border-bottom:1px solid rgba(255,255,255,0.03)
  }
  .sidedrawer a{
    display:block;padding:14px 18px;color:#e6eefc;text-decoration:none;
    border-bottom:1px solid rgba(255,255,255,0.02);
  }
  .sidedrawer a:hover{background:rgba(255,255,255,0.03)}

  /* APP CONTENT */
  .app {
    padding-top:70px;
    padding-bottom:88px;
    min-height:100vh;
  }
  .page{display:none;padding:14px}
  .page.active{display:block}

  /* HOME GRID - big rounded cards */
  .home-grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px;
  }
  .home-card{
    background:linear-gradient(180deg,#fff,#f9fbff);
    border-radius:var(--card-radius);
    padding:20px;
    min-height:120px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    box-shadow:0 6px 18px rgba(13,71,161,0.08);
    cursor:pointer;
    border:1px solid rgba(13,71,161,0.06);
    transition:transform .15s ease, box-shadow .15s ease;
  }
  .home-card:hover{transform:translateY(-6px); box-shadow:0 14px 30px rgba(13,71,161,0.09)}
  .home-card .title{font-weight:700;font-size:18px;color:var(--primary)}
  .home-card .subtitle{margin-top:6px;color:var(--muted);font-size:13px}

  /* Section header / back */
  .section-header{
    display:flex;align-items:center;gap:10px;margin-bottom:12px;
  }
  .back-btn{
    background:#e8eefc;color:var(--primary);padding:8px 10px;border-radius:10px;border:none;cursor:pointer;
    font-weight:700;
  }

  /* Class buttons grid */
  .classes-grid{
    display:grid;grid-template-columns:repeat(3,1fr);gap:10px;
  }
  .class-btn{
    background:#fff;border-radius:12px;padding:14px;text-align:center;font-weight:700;color:var(--primary);
    box-shadow:0 6px 16px rgba(13,71,161,0.05);cursor:pointer;border:1px solid rgba(13,71,161,0.04)
  }

  /* PDF list style */
  .pdf-list{display:flex;flex-direction:column;gap:10px}
  .pdf-item{
    background:#fff;padding:12px;border-radius:10px;display:flex;align-items:center;justify-content:space-between;
    border:1px solid rgba(0,0,0,0.04);
    cursor:pointer;
  }
  .pdf-item .meta{display:flex;gap:12px;align-items:center}
  .pdf-icon{
    width:42px;height:42px;border-radius:8px;background:linear-gradient(180deg,#fdf2f2,#fee2e2);display:flex;align-items:center;justify-content:center;font-weight:700;color:#b91c1c
  }
  .pdf-title{font-weight:700}
  .pdf-sub{color:var(--muted);font-size:13px}

  .muted{color:var(--muted)}

  /* OVERLAY VIEWER */
  .overlay{
    position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(15,23,42,0.6);display:none;
    align-items:center;justify-content:center;z-index:9999;padding:0;
  }
  .overlay.open{display:flex}
  .viewer{
    width:100%;max-width:1000px;height:86vh;background:#fff;border-radius:0;overflow:hidden;position:relative;
    box-shadow:0 20px 60px rgba(2,6,23,0.5);
  }
  .viewer .vtop{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #eee}
  .viewer .vtop .title{font-weight:700}
  .viewer .vbody{height:calc(86vh - 56px);}
  .viewer iframe{width:100%;height:100%;border:0}

  /* BOTTOM NAV */
  .bottom-nav{
    position:fixed;left:0;right:0;bottom:0;height:68px;background:#fff;border-top:1px solid rgba(0,0,0,0.06);
    display:flex;align-items:center;justify-content:space-around;z-index:1300;
  }
  .nav-item{display:flex;flex-direction:column;align-items:center;font-size:12px;color:var(--muted);cursor:pointer;padding:6px 8px}
  .nav-item.active{color:var(--primary);font-weight:700}

  @media (max-width:600px){
    .classes-grid{grid-template-columns:repeat(2,1fr)}
    .home-grid{grid-template-columns:repeat(2,1fr)}
  }
</style>
</head>
<body>

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="hamburger" id="hambtn" title="Menu">‚ò∞</div>
    <div class="app-title">JCV Academy</div>
    <div class="top-actions">
      <button id="searchBtn" title="Search">üîç</button>
      <button id="notifyBtn" title="Notifications">üîî</button>
    </div>
  </div>

  <!-- SIDE DRAWER -->
  <nav class="sidedrawer" id="drawer">
    <div class="user">
      <div style="font-weight:800;font-size:16px">JCV Academy</div>
      <div style="font-size:13px;color:#c7d7ff;margin-top:6px">Ashok Nagar, Vijayawada</div>
    </div>
    <a href="#" onclick="openSection('textbooks')">üìò Textbooks</a>
    <a href="#" onclick="openSection('previous')">üìö Previous Papers</a>
    <a href="#" onclick="openSection('model')">üóÇÔ∏è Model Papers</a>
    <a href="#" onclick="showPage('tests')">üìù Online Tests</a>
    <a href="#" onclick="showPage('profile')">üë§ Profile</a>
    <a href="#" onclick="showPage('about')">‚ÑπÔ∏è About</a>
  </nav>

  <!-- APP CONTENT -->
  <div class="app">

    <!-- HOME PAGE -->
    <section id="home" class="page active">
      <div style="padding:6px 0 10px">
        <div style="display:flex;gap:10px;align-items:center;justify-content:space-between">
          <div>
            <div style="font-size:18px;font-weight:800">Welcome back!</div>
            <div class="muted" style="font-size:13px">Pick a resource to continue</div>
          </div>
          <div style="text-align:right">
            <div style="font-size:13px;color:#e6eefc;background:rgba(255,255,255,0.06);padding:6px 10px;border-radius:10px">JCV ICE</div>
          </div>
        </div>
      </div>

      <div class="home-grid" style="margin-top:12px">
        <div class="home-card" onclick="openSection('textbooks')">
          <div class="title">Text Books</div>
          <div class="subtitle">Class-wise textbooks & PDFs</div>
        </div>

        <div class="home-card" onclick="openSection('previous')">
          <div class="title">Previous Papers</div>
          <div class="subtitle">AP SSC question papers</div>
        </div>

        <div class="home-card" onclick="openSection('model')">
          <div class="title">Model Papers</div>
          <div class="subtitle">Practice with model sets</div>
        </div>

        <div class="home-card" onclick="showPage('tests')">
          <div class="title">Online Tests</div>
          <div class="subtitle">Quizzes & timed exams</div>
        </div>
      </div>
    </section>

    <!-- CLASSES PAGE -->
    <section id="classes" class="page">
      <div class="section-header">
        <button class="back-btn" onclick="navTo('home')">‚Üê Home</button>
        <div style="flex:1">
          <div style="font-weight:800" id="classesTitle">Textbooks ‚Äî Select Class</div>
          <div class="muted" style="font-size:13px" id="classesSubtitle">Pick a class to view files</div>
        </div>
      </div>

      <div class="classes-grid" style="margin-top:10px">
        <div class="class-btn" onclick="openPdfList(1)">Class 1</div>
        <div class="class-btn" onclick="openPdfList(2)">Class 2</div>
        <div class="class-btn" onclick="openPdfList(3)">Class 3</div>
        <div class="class-btn" onclick="openPdfList(4)">Class 4</div>
        <div class="class-btn" onclick="openPdfList(5)">Class 5</div>
        <div class="class-btn" onclick="openPdfList(6)">Class 6</div>
        <div class="class-btn" onclick="openPdfList(7)">Class 7</div>
        <div class="class-btn" onclick="openPdfList(8)">Class 8</div>
        <div class="class-btn" onclick="openPdfList(9)">Class 9</div>
        <div class="class-btn" onclick="openPdfList(10)">Class 10</div>
      </div>
    </section>

    <!-- PDF LIST PAGE -->
    <section id="pdfList" class="page">
      <div class="section-header">
        <button class="back-btn" onclick="navTo('classes')">‚Üê Back</button>
        <div style="flex:1">
          <div style="font-weight:800" id="pdfListTitle">Class X ‚Äî Textbooks</div>
          <div class="muted" style="font-size:13px" id="pdfListSub">Click a file to open</div>
        </div>
      </div>

      <div class="pdf-list" id="pdfItems" style="margin-top:10px">
        <!-- dynamically filled -->
      </div>
    </section>

    <!-- ONLINE TESTS PAGE -->
    <section id="tests" class="page">
      <div class="section-header">
        <button class="back-btn" onclick="navTo('home')">‚Üê Home</button>
        <div style="flex:1">
          <div style="font-weight:800">Online Tests</div>
          <div class="muted" style="font-size:13px">Open a quiz to start (opens in viewer)</div>
        </div>
      </div>

      <div style="margin-top:12px;display:flex;flex-direction:column;gap:10px" id="quizList">
        <!-- quizzes are injected here -->
      </div>
    </section>

    <!-- PROFILE -->
    <section id="profile" class="page">
      <div class="section-header">
        <button class="back-btn" onclick="navTo('home')">‚Üê Home</button>
        <div style="flex:1"><div style="font-weight:800">My Profile</div><div class="muted" style="font-size:13px">Manage account</div></div>
      </div>
      <div class="card" style="margin:12px 0">Name: Student</div>
      <div class="card" style="margin:12px 0">Centre: JCV Tuition Centre</div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="page">
      <div class="section-header">
        <button class="back-btn" onclick="navTo('home')">‚Üê Home</button>
        <div style="flex:1"><div style="font-weight:800">About</div><div class="muted" style="font-size:13px">App version: Demo</div></div>
      </div>
      <div class="card">This is a ClassPlus-styled single page demo built for JCV Academy.</div>
    </section>

  </div>

  <!-- VIEWER OVERLAY -->
  <div class="overlay" id="overlay">
    <div class="viewer" role="dialog" aria-modal="true" aria-label="Viewer">
      <div class="vtop">
        <div class="title" id="viewerTitle">Document</div>
        <div>
      <!--    <button id="openNew" style="background:#efefef;border:0;padding:8px 12px;border-radius:8px;margin-right:8px;cursor:pointer" title="Open in new tab">Open</button>
          <button id="downloadBtn" style="background:#efefef;border:0;padding:8px 12px;border-radius:8px;margin-right:8px;cursor:pointer" title="Download">Download</button>-->
          <button style="background:#ef4444;color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer" onclick="closeViewer()">Close</button>
        </div>
      </div>
      <div class="vbody">
        <iframe id="viewerFrame" src=""></iframe>
      </div>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <div class="bottom-nav">
    <div class="nav-item active" id="navHome" onclick="navTo('home')">
      <div style="font-size:18px">üè†</div>
      <div style="font-size:12px">Home</div>
    </div>
    <div class="nav-item" id="navBooks" onclick="openSection('textbooks')">
      <div style="font-size:18px">üìò</div>
      <div style="font-size:12px">Textbooks</div>
    </div>
    <div class="nav-item" id="navTests" onclick="showPage('tests')">
      <div style="font-size:18px">üìù</div>
      <div style="font-size:12px">Tests</div>
    </div>
    <div class="nav-item" id="navMore" onclick="navTo('profile')">
      <div style="font-size:18px">üë§</div>
      <div style="font-size:12px">More</div>
    </div>
  </div>

<script>
/* ---------- SAMPLE DATA ----------
 Replace driveId placeholders with your real Google Drive file IDs.
 For quizzes, place quiz HTML files in same folder (quiz1.html etc).
-----------------------------------*/
const DATA = {
  textbooks: {
    6: [
      { title: "Maths Textbook - Class 6", driveId: "1AaBbCcDdEeF1" },
      { title: "Science Textbook - Class 6", driveId: "1AaBbCcDdEeF2" }
    ],
    7: [
      { title: "Maths Textbook - Class 7", driveId: "1BbCcDdEeFf3" }
    ],
    10: [
      { title: "Maths Textbook - Class 10", driveId: "1ZZaaYYbbCC" }
    ]
  },
  previous: {
    10: [
      { title: "AP SSC 2025 - Maths", driveId: "1PREV2025MATH" },
      { title: "AP SSC 2024 - Science", driveId: "1PREV2024SCI" }
    ]
  },
  model: {
    9: [
      { title: "Model Paper 9 - Set A", driveId: "1MEMTz5VCXePQbonQC0hsvegc3BgjcsWb" }
    ]
  },
  quizzes: [
    { title: "Quadratic Equations", file: "quiz1.html", info: "10 MCQs ¬∑ 10 min" },
    { title: "Quiz 2 ‚Äî Geometry", file: "quiz2.html", info: "15 MCQs ¬∑ 15 min" },
    { title: "Reflection and Refraction", file: "quiz3.html", info: "50 MCQs ¬∑ 50 min" }
  ]
};

/* App state */
let currentMode = 'textbooks'; // textbooks | previous | model
let currentClass = null;
let currentDoc = '';

/* Drawer toggle */
const drawer = document.getElementById('drawer');
document.getElementById('hambtn').addEventListener('click', ()=> drawer.classList.toggle('open'));

/* Navigation helpers */
function showPage(id){
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('active');
  updateBottomNav(id);
  // close drawer
  drawer.classList.remove('open');
}

function navTo(page) {
  showPage(page);
  window.scrollTo(0,0);
}

/* Open a top-level section (textbooks / previous / model) */
function openSection(section){
  currentMode = section;
  const title = section === 'textbooks' ? 'Textbooks' : section === 'previous' ? 'Previous Papers' : 'Model Papers';
  document.getElementById('classesTitle').innerText = title + ' ‚Äî Select Class';
  document.getElementById('classesSubtitle').innerText = 'Pick a class to view ' + (section === 'textbooks' ? 'textbooks' : section === 'previous' ? 'previous papers' : 'model papers');
  showPage('classes');
  // highlight bottom nav
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('navBooks').classList.add('active');
}

/* Populate PDF list for selected class */
function openPdfList(classNumber){
  currentClass = classNumber;
  const title = `Class ${classNumber} ‚Äî ` + (currentMode === 'textbooks' ? 'Textbooks' : currentMode === 'previous' ? 'Previous Papers' : 'Model Papers');
  document.getElementById('pdfListTitle').innerText = title;
  const itemsWrap = document.getElementById('pdfItems');
  itemsWrap.innerHTML = '';
  const list = (DATA[currentMode] && DATA[currentMode][classNumber]) ? DATA[currentMode][classNumber] : [];
  if(list.length === 0){
    itemsWrap.innerHTML = `<div class="card" style="margin:6px 0">No files found for Class ${classNumber} in '${currentMode}'. Add Google Drive IDs in DATA.</div>`;
  } else {
    list.forEach(doc=>{
      const div = document.createElement('div');
      div.className = 'pdf-item';
      div.innerHTML = `<div class="meta"><div class="pdf-icon">PDF</div><div><div class="pdf-title">${escapeHtml(doc.title)}</div><div class="pdf-sub">Google Drive file</div></div></div><div class="muted">Open</div>`;
      div.addEventListener('click', ()=> openViewerFromDrive(doc.driveId, doc.title));
      itemsWrap.appendChild(div);
    });
  }
  showPage('pdfList');
  window.scrollTo(0,0);
}

/* Populate Quiz list */
function populateQuizzes(){
  const wrap = document.getElementById('quizList');
  wrap.innerHTML = '';
  if(!DATA.quizzes || DATA.quizzes.length===0){
    wrap.innerHTML = '<div class="card">No quizzes available. Add entries to DATA.quizzes.</div>';
    return;
  }
  DATA.quizzes.forEach(q=>{
    const div = document.createElement('div');
    div.className = 'pdf-item';
    div.innerHTML = `<div class="meta"><div class="pdf-icon">Q</div><div><div class="pdf-title">${escapeHtml(q.title)}</div><div class="pdf-sub">${escapeHtml(q.info || '')}</div></div></div><div class="muted">Start</div>`;
    div.addEventListener('click', ()=> openViewer(q.file, q.title));
    wrap.appendChild(div);
  });
}

/* Viewer helpers */
function openViewerFromDrive(driveId, title){
  const url = `https://drive.google.com/file/d/${encodeURIComponent(driveId)}/preview`;
  openViewer(url, title);
}
function openViewer(url, title='Document'){
  currentDoc = url;
  document.getElementById('viewerTitle').innerText = title;
  // If it's a relative file like quiz1.html it will open in iframe. For other links, iframe also tries.
  document.getElementById('viewerFrame').src = url;
  document.getElementById('overlay').classList.add('open');
  // set open & download buttons
 // document.getElementById('openNew').onclick = ()=> window.open(currentDoc, '_blank');
 // document.getElementById('downloadBtn').onclick = ()=> window.open(currentDoc, '_blank');
}

/* Close viewer */
function closeViewer(){
  document.getElementById('viewerFrame').src = '';
  document.getElementById('overlay').classList.remove('open');
}

/* small utilities */
function escapeHtml(s){
  return String(s || '').replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m] });
}

/* keyboard close */
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeViewer(); });

/* close drawer when clicking outside */
document.addEventListener('click', function(evt){
  const drawerEl = document.getElementById('drawer');
  const hambtn = document.getElementById('hambtn');
  if(!drawerEl.contains(evt.target) && !hambtn.contains(evt.target)){
    drawerEl.classList.remove('open');
  }
});

/* keep bottom nav active highlight */
function updateBottomNav(pageId){
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  if(pageId === 'home') document.getElementById('navHome').classList.add('active');
  else if(pageId === 'tests') document.getElementById('navTests').classList.add('active');
  else document.getElementById('navMore').classList.add('active');
}

/* small initializations */
showPage('home');
populateQuizzes();

</script>
</body>
</html>
